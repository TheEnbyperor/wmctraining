(function(a){a.fn.lws_rw_ajax_popup=function(b){if(a(this).data("user")!=undefined){a.post(lwsWooRewards.ajaxUrl,{action:b,user_id:a(this).data("user")},function(e){var d=a("<div>").attr("id","lws-wr-modal-bg");var f=a("<div>").attr("id","lws-wr-modal-content").appendTo(d);var c=a("<span>").attr("id","lws-wr-modal-close").html("&times;").appendTo(f);f.append(a("<div>").addClass("lws-wr-historic-list").html(e));d.click(function(g){if(g.target.id=="lws-wr-modal-bg"){d.remove()}});c.click(function(){d.remove()});d.appendTo("body")},"html").fail(function(e,f,c){alert("Action not available.")});return false}}})(jQuery);jQuery(function(a){a("table#PointList").on("click","a.lws-wr-show-historic",function(){return a(this).lws_rw_ajax_popup("lws_woorewards_historic")});a("table#PointList").on("click","a.lws-wr-show-coupons",function(){return a(this).lws_rw_ajax_popup("lws_woorewards_coupons")});a("input[name='protectednewpoints']").keyup(function(){var b=a(this).val();var c=a(this).closest("tr").find("span[data-name='_actualpoints']").text();if(b!=c){a(this).closest("tr").find(".lws-rw-points-diff").text("("+(b>=c?"+":"")+(b-c)+")")}else{a(this).closest("tr").find(".lws-rw-points-diff").text("")}})});